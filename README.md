## MATLAB まばたきカウンタープログラム
このリポジトリには、MATLABを使用して動画内のまばたきを検出・カウントするプログラムが含まれています。このプログラムは、vision.CascadeObjectDetectorを使用して目を検出し、輝度の変化を基にまばたきを識別します。

### 特徴
- Haarカスケードを使用して動画内の目の領域を検出。
- ポイントトラッカーを用いて目の特徴点を追跡。
- 輝度の変化を利用してまばたきをカウント。
- 再生中の動画にまばたき回数をリアルタイム表示。

### 必要条件
- MATLAB（R2023aで動作確認済み。ただし、Computer Vision Toolboxが必要です）。
- Computer Vision Toolbox。
- 処理する動画ファイル（形式：.mp4）。

### 使用方法
リポジトリをクローンしてください：

```bash
git clone https://github.com/yourusername/BlinkCounter_MATLAB.git
```
1. MATLABを開き、リポジトリのフォルダに移動します。

2. 入力動画ファイルを同じフォルダ内に置き、スクリプト内のvideoName変数を動画ファイル名（拡張子を除く）に変更してください：

```matlab
videoName = "your-video-name"; % 動画ファイル名を指定
```
3. スクリプトcount_eyes_blink.mを実行します。

4. 動画の再生中に、検出された目の領域とまばたき回数が表示されます。最終的なまばたき回数はMATLABのコマンドウィンドウに出力されます。

### プログラムの概要
このプログラムは以下の2つのモードで動作します：

1. 目の検出モード：

    - Haarカスケードを用いてフレーム内の目を検出。
    - ポイントトラッカーを初期化し、目の特徴点を追跡。

2. 特徴点追跡モード：

    - 検出された特徴点を追跡。輝度の変化を監視し、まばたきを検出・カウント。

### カスタマイズ
まばたき検出の輝度しきい値は、blinkThreshold変数を調整することで変更可能です：

```matlab
blinkThreshold = 1; % 動画に応じて適切な値を設定
```
ポイントトラッカーの感度は、MaxBidirectionalErrorパラメータを変更することで調整可能です：

```matlab
pointTracker = vision.PointTracker('MaxBidirectionalError', 2);
```

### 出力
- 動画フレームにリアルタイムでまばたき回数を表示します。
- 最終的なまばたき回数はMATLABのコマンドウィンドウに表示されます。

### 注意点
- カメラの視点が安定しており、目がはっきりと見える動画を使用することを推奨します。
- 動画の品質や照明条件によっては、検出性能が変わる可能性があります。
